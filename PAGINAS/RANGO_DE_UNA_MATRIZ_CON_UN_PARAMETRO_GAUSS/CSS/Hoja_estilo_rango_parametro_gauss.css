:root{
  --bg1:#f7f9fc;--bg2:#eef2f7;--panel:#fff;--line:#111827;--line2:#cbd5e1;
  --text:#111827;--muted:#6b7280;--blue:#2563eb;--shadow:0 6px 18px rgba(15,23,42,.10);
  --r:12px;--sans:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial;
  --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}
*{box-sizing:border-box;}
html,body{height:100%;}
body{margin:0;font-family:var(--sans);color:var(--text);background:linear-gradient(180deg,#fff 0%,var(--bg1) 20%,var(--bg2) 100%);padding:10px 10px 18px;}
#tituloinicial,#notaParametro,#contenedor{max-width:none;width:100%;margin:0;}
#tituloinicial{padding:6px 6px 10px;position:relative;}
#tituloinicial h1{margin:6px 0 10px;text-align:center;font-size:16px;line-height:1.2;font-weight:900;letter-spacing:.2px;text-transform:uppercase;color:var(--text);}
#controlesTop{position:absolute;right:6px;top:6px;display:flex;gap:10px;align-items:center;}
a{text-decoration:none;color:inherit;}
.abreVentana,#btnHome,#otraMatriz{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:10px;border:1px solid var(--line2);background:linear-gradient(180deg,#fff 0%,#f3f4f6 100%);color:var(--text);font-weight:800;font-size:12px;box-shadow:0 2px 8px rgba(15,23,42,.08);cursor:pointer;user-select:none;}
#btnHome svg{fill:var(--text);}
.abreVentana:hover,#btnHome:hover,#otraMatriz:hover{border-color:#94a3b8;filter:brightness(.99);}
.abreVentana:active,#btnHome:active,#otraMatriz:active{transform:translateY(1px);}

#notaParametro{margin:10px 0 12px;text-align:center;}
#notaParametro #span1{display:inline-block;padding:6px 10px;border-radius:10px;border:1px solid var(--line2);background:#fff;color:#374151;font-weight:700;font-size:12px;}

#contenedor{display:flex;flex-direction:column;gap:12px;}

/* Contenedores principales */
#caja1,#caja2,#contenedorCaja3{background:var(--panel);border:2px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow);padding:12px;}
#caja1:empty,#caja2:empty,#contenedorCaja3:empty{min-height:34px;}
#caja2,#contenedorCaja3{display:none;}

/* Base */
h2,h3{margin:0;color:var(--text);}
p{margin:6px 0;color:var(--text);}
label{font-weight:800;color:var(--text);font-size:12px;}
input[type="radio"]{accent-color:var(--blue);cursor:pointer;}
button{appearance:none;border:1px solid var(--line2);border-radius:10px;background:linear-gradient(180deg,#fff 0%,#f3f4f6 100%);color:var(--text);font-weight:800;font-size:12px;padding:6px 10px;cursor:pointer;box-shadow:0 2px 8px rgba(15,23,42,.08);}
button:hover{border-color:#94a3b8;}
button:active{transform:translateY(1px);}
button:disabled{opacity:.55;cursor:not-allowed;transform:none;box-shadow:none;}
input[type="text"]{width:140px;max-width:100%;padding:6px 8px;border-radius:8px;border:1px solid var(--line2);background:#fff;color:var(--text);outline:none;font-size:12px;}
input[type="text"]:focus{border-color:#60a5fa;box-shadow:0 0 0 3px rgba(37,99,235,.18);}

/* Matriz de entrada */
table{border-collapse:separate;border-spacing:8px 6px;}
td{vertical-align:middle;}
#caja12 td{text-align:left;}
#caja12 table input[type="text"]{width:54px;font-family:var(--mono);font-size:12px;padding:4px 6px;border-radius:6px;}

/* Inputs iniciales en línea */
#caja112{display:flex;gap:10px;flex-wrap:nowrap;align-items:flex-end;}
#caja112>div{display:flex;flex-direction:column;gap:4px;}
#caja112 input[type="text"]{width:40px !important;}

/* CONTINUAR */
#caja1.layoutContinuar{display:flex;flex-wrap:nowrap;align-items:stretch;gap:10px;}
#caja1.layoutContinuar>*{flex:0 0 auto;min-width:0;}
#caja1.layoutContinuar .panelAuto{width:max-content;max-width:100%;}
#caja1.layoutContinuar .formAuto{flex:1 1 auto;min-width:360px;}
.panelBox{border:1px solid #d1d5db;border-radius:12px;padding:8px;background:#fff;}
.panelTitle{font-weight:900;margin:0 0 6px 0;}
.sectionTitle{margin:0 0 8px 0;}

/* Opciones más separadas */
.optionRow{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin:12px 0;}

/* Botones a la izquierda */
.btnRow{display:flex;justify-content:flex-start;gap:8px;align-items:center;margin-top:10px;}

/* Utilidades */
.rowFlex{display:flex;align-items:center;gap:8px;}
.rowFlexWrap{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}
.rowGap6{gap:6px;}
.mt8{margin-top:8px;}
.mb8{margin-bottom:8px;}
.minH18{min-height:18px;}
.mL8{margin-left:8px;}
.w150{width:150px !important;}
.w110{width:110px !important;}
.w90{width:90px !important;}
.w40{width:40px !important;}
.muted{color:var(--muted);font-weight:800;font-size:12px;}

/* SOLUCIÓN */
#caja1.layoutSol{display:grid;grid-template-columns:1fr;grid-template-areas:"titulo" "mats";gap:10px;align-items:start;overflow-x:hidden;}
#caja1.layoutSol>.tituloSol{grid-area:titulo;font-weight:900;font-size:18px;margin:0;}
#caja1.layoutSol>.gridSol{grid-area:mats;display:flex;gap:18px;flex-wrap:wrap;align-content:flex-start;min-width:0;}
#caja1.layoutSol>.gridSol>.panelSol{flex:0 0 auto;width:max-content;max-width:100%;}
.panelSol{border:1px solid #d1d5db;border-radius:12px;padding:8px;background:#fff;}

/* Scroll SOLO en caja2 y caja3 cuando haya overflow vertical */
#caja2{
  display:flex;align-items:center;gap:14px;flex-wrap:wrap;
  max-height:42vh;
  overflow-y:auto;
  overflow-x:visible;
}
#contenedorCaja3{
  max-height:42vh;
  overflow-y:auto;
  overflow-x:hidden;
}
#caja2>div{flex:0 0 auto;}
#contenedorCaja3.casosWrap{display:flex;flex-wrap:wrap;gap:10px;align-items:stretch;}

.casosCard{border:1px solid #d1d5db;border-radius:12px;padding:10px;background:#fff;box-sizing:border-box;flex:0 0 calc(50% - 10px);min-width:420px;}
.casosPanel{margin-top:10px;border:1px solid #d1d5db;border-radius:12px;padding:10px;background:#fff;}
.casosLine{font-weight:900;display:flex;align-items:center;gap:8px;flex-wrap:wrap;}

/* Ventana ayuda */
.ventana{display:none;position:fixed;inset:0;z-index:999;align-items:center;justify-content:center;background:rgba(17,24,39,.35);padding:18px;}
.contenidoVentana{width:min(980px,95vw);max-height:92vh;overflow:hidden;background:#fff;border:2px solid var(--line);border-radius:14px;box-shadow:0 18px 48px rgba(15,23,42,.22);padding:12px;position:relative;}
.contenidoVentana h2{font-size:14px;font-weight:900;margin:0 0 10px;text-transform:uppercase;}
.cierraVentana{position:absolute;right:12px;top:10px;font-size:24px;line-height:1;cursor:pointer;color:var(--text);font-weight:900;}
#pdf1{border:1px solid var(--line2);border-radius:10px;background:#fff;}

/* Responsive */
@media (max-width:980px){
  #controlesTop{position:static;justify-content:flex-end;margin:6px 0 0;}
  #tituloinicial h1{font-size:14px;}
  #caja1.layoutContinuar{flex-wrap:wrap;}
  #caja1.layoutContinuar .formAuto{min-width:320px;}
  #caja112{flex-wrap:wrap;}
  .casosCard{min-width:320px;flex:1 1 100%;}
  #caja2,#contenedorCaja3{max-height:50vh;}
}


/* Ventanas de ayuda: casi pantalla completa (PC, tablet y móvil) */
.contenidoVentana{width:min(1400px,96vw)!important;height:92vh!important;max-height:92vh!important;display:flex!important;flex-direction:column!important;align-items:stretch!important;justify-content:flex-start!important}
.contenidoVentana iframe{flex:1 1 auto!important;width:100%!important;height:100%!important;border:0!important}
.cierraVentana{width:40px!important;height:40px!important;font-size:26px!important}

#contenedor{
  height:auto;
  min-height:calc(100vh - 76px - 74px);
  padding-bottom:10px;
}
