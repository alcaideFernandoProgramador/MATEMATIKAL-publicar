:root{
  --bg1:#f7f9fc;--bg2:#eef2f7;--panel:#fff;--line:#111827;--line2:#cbd5e1;
  --text:#111827;--muted:#6b7280;--blue:#2563eb;--shadow:0 6px 18px rgba(15,23,42,.10);
  --r:12px;--sans:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial;
  --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}
*{box-sizing:border-box;}
html,body{height:100%;}
body{margin:0;font-family:var(--sans);color:var(--text);background:linear-gradient(180deg,#fff 0%,var(--bg1) 20%,var(--bg2) 100%);padding:10px 10px 18px;}

#tituloinicial,#notaParametro,#contenedor{max-width:none;width:100%;margin:0;}
#tituloinicial{padding:6px 6px 10px;position:relative;}
#tituloinicial h1{margin:6px 0 10px;text-align:center;font-size:16px;line-height:1.2;font-weight:900;letter-spacing:.2px;text-transform:uppercase;color:var(--text);}
#controlesTop{position:absolute;right:6px;top:6px;display:flex;gap:10px;align-items:center;}
a{text-decoration:none;color:inherit;}
.abreVentana,#btnHome,#otraMatriz{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:10px;border:1px solid var(--line2);background:linear-gradient(180deg,#fff 0%,#f3f4f6 100%);color:var(--text);font-weight:800;font-size:12px;box-shadow:0 2px 8px rgba(15,23,42,.08);cursor:pointer;user-select:none;}
#btnHome{display:inline-flex;}
#btnHome svg{fill:var(--text);}
.abreVentana:hover,#btnHome:hover,#otraMatriz:hover{border-color:#94a3b8;filter:brightness(.99);}
.abreVentana:active,#btnHome:active,#otraMatriz:active{transform:translateY(1px);}

#notaParametro{margin:10px 0 12px;text-align:center;}
#notaParametro #span1{display:inline-block;padding:6px 10px;border-radius:10px;border:1px solid var(--line2);background:#fff;color:#374151;font-weight:700;font-size:12px;}

#contenedor{display:flex;flex-direction:column;gap:12px;}

/* Contenedores principales */
#caja1,#caja2,#contenedorCaja3{background:var(--panel) !important;border:2px solid var(--line) !important;border-radius:var(--r) !important;box-shadow:var(--shadow) !important;padding:12px !important;}
#caja1:empty,#caja2:empty,#contenedorCaja3:empty{min-height:34px;}
#caja2,#contenedorCaja3{display:none;}

/* Base */
h2,h3{margin:0;color:var(--text);}
p{margin:6px 0;color:var(--text);}
label{font-weight:800;color:var(--text);font-size:12px;}
input[type="radio"]{accent-color:var(--blue);cursor:pointer;}
button{appearance:none;border:1px solid var(--line2);border-radius:10px;background:linear-gradient(180deg,#fff 0%,#f3f4f6 100%);color:var(--text);font-weight:800;font-size:12px;padding:6px 10px;cursor:pointer;box-shadow:0 2px 8px rgba(15,23,42,.08);}
button:hover{border-color:#94a3b8;}
button:active{transform:translateY(1px);}
button:disabled{opacity:.55;cursor:not-allowed;transform:none;box-shadow:none;}
input[type="text"],input:not([type]){width:140px;max-width:100%;padding:6px 8px;border-radius:8px;border:1px solid var(--line2);background:#fff;color:var(--text);outline:none;font-size:12px;}
input[type="text"]:focus,input:not([type]):focus{border-color:#60a5fa;box-shadow:0 0 0 3px rgba(37,99,235,.18);}

/* Matriz de entrada (sistema) */
table{border-collapse:separate;border-spacing:8px 6px;}
td{vertical-align:middle;}
#caja12 td{text-align:left;}
#caja12 table input[type="text"],#caja12 table input:not([type]){width:54px;font-family:var(--mono);font-size:12px;padding:4px 6px;border-radius:6px;}

/* Inputs iniciales en línea */
#caja112{display:flex;gap:10px;flex-wrap:nowrap;align-items:flex-end;}
#caja112>div{display:flex;flex-direction:column;gap:4px;}
#caja112 input[type="text"],#caja112 input:not([type]){width:40px !important;}

/* Layout principal del sistema (override de estilos inline del JS) */
#caja1{display:flex !important;flex-wrap:nowrap !important;align-items:stretch !important;gap:10px !important;justify-content:flex-start !important;}
#caja11{flex:1 1 auto !important;width:auto !important;min-width:0 !important;}
#caja12{flex:0 0 360px !important;width:auto !important;min-width:320px !important;max-width:40% !important;}

/* Paneles internos del constructor del sistema */
#caja111{display:flex !important;align-items:stretch !important;gap:10px !important;flex-wrap:nowrap !important;}
#caja1111,#caja1112,#caja112,#caja1121,#caja1122{border:1px solid #d1d5db !important;border-radius:12px !important;background:#fff !important;}
#caja1111,#caja1112{padding:8px !important;}
#caja11111{font-weight:900 !important;margin:0 0 6px 0 !important;font-size:14px !important;}
#caja11112{font-weight:700 !important;font-size:12px !important;color:var(--muted) !important;}
#caja11121,#caja11122,#caja11123{display:flex !important;flex-direction:column;gap:4px;}
#caja11121 p,#caja11122 p,#caja11123 p{margin:0;}

/* Títulos creados por JS */
#titulo3{margin:0;font-weight:900;font-size:12px;letter-spacing:.6px;text-transform:uppercase;color:var(--muted);}

/* Zona de trabajos (caja2) y resultados/casos (caja3) */
#caja2{display:flex;align-items:center;gap:14px;flex-wrap:wrap;max-height:42vh;overflow-y:auto;overflow-x:visible;border:2px solid var(--line) !important;}
#caja2>div{flex:0 0 auto;}
#contenedorCaja3{max-height:42vh;overflow-y:auto;overflow-x:hidden;display:none;}
#caja3{display:flex;flex-wrap:wrap;gap:10px;align-items:stretch;background:transparent !important;border:0 !important;box-shadow:none !important;padding:0 !important;}

/* Opciones: filas alineadas como en la página de rango */
.optionRow{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin:12px 0;}
.btnRow{display:flex;justify-content:flex-start;gap:8px;align-items:center;margin-top:10px;}
.rowFlex{display:flex;align-items:center;gap:8px;}
.rowFlexWrap{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}
.rowGap6{gap:6px;}
.mt8{margin-top:8px;}
.mb8{margin-bottom:8px;}
.minH18{min-height:18px;}
.mL8{margin-left:8px;}
.w150{width:150px !important;}
.w110{width:110px !important;}
.w90{width:90px !important;}
.w40{width:40px !important;}
.muted{color:var(--muted);font-weight:800;font-size:12px;}

/* Ventana ayuda */
.ventana{display:none;position:fixed;inset:0;z-index:999;align-items:center;justify-content:center;background:rgba(17,24,39,.35);padding:18px;}
.contenidoVentana{width:min(980px,95vw);max-height:92vh;overflow:hidden;background:#fff;border:2px solid var(--line);border-radius:14px;box-shadow:0 18px 48px rgba(15,23,42,.22);padding:12px;position:relative;}
.contenidoVentana h2{font-size:14px;font-weight:900;margin:0 0 10px;text-transform:uppercase;}
.cierraVentana{position:absolute;right:12px;top:10px;font-size:24px;line-height:1;cursor:pointer;color:var(--text);font-weight:900;}
#pdf1{border:1px solid var(--line2);border-radius:10px;background:#fff;}

/* Responsive */
@media (max-width:980px){
  #controlesTop{position:static;justify-content:flex-end;margin:6px 0 0;}
  #tituloinicial h1{font-size:14px;}
  #caja1{flex-wrap:wrap;}
  #caja12{max-width:100%;flex:1 1 100%;}
  #caja111{flex-wrap:wrap;}
  #caja112{flex-wrap:wrap;}
  #caja2,#contenedorCaja3{max-height:50vh;}
}
